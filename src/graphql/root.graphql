type Query {
  user(id: ObjectId!): UserResult!
  users: [User!]!
  habit(id: ObjectId!): HabitResult!
  habits(userId: ObjectId!): [Habit!]!
  habitLogs(habitId: ObjectId!): [HabitLog!]!
}

type Mutation {
  createUser(input: CreateUser!): CreateUserResult!
  deleteUser(id: ObjectId!): UserResult!
  updateUser(
    id: ObjectId!
    username: String
    firstName: String
    lastName: String
  ): UserResult!
  createHabit(input: CreateHabit!): CreteHabitResult!
  deleteHabit(id: ObjectId!): HabitResult!
  createHabitLog(habitId: ObjectId!, status: Status): HabitLogResult!
}

# MARK: ----- Scalars -----

scalar Date
scalar ObjectId

# MARK: ----- Union results -----

union UserResult = User | UserNotFoundError
union CreateUserResult = User | UserAlreadyExistsError

union HabitResult = Habit | HabitNotFoundError | UserNotFoundError
union CreteHabitResult = Habit | UserNotFoundError | HabitAlreadyExistsError

union HabitLogResult =
    HabitLog
  | HabitNotFoundError
  | HabitLogAlreadyExistsError

# MARK: ----- Enums -----

enum Status {
  COMPLETED
  FAILED
}

enum Regularity {
  DAILY
  WEEKLY
  MONTHLY
}

# MARK: ----- Inputs -----

input CreateUser {
  email: String!
  username: String!
  firstName: String
  lastName: String
}

input CreateHabit {
  userId: ObjectId!
  title: String!
  description: String
  regularity: Regularity
}

# MARK: ----- Errors -----

type UserNotFoundError {
  _: Boolean
}
type UserAlreadyExistsError {
  _: Boolean
}

type HabitNotFoundError {
  _: Boolean
}
type HabitAlreadyExistsError {
  _: Boolean
}

type HabitLogAlreadyExistsError {
  _: Boolean
}

# MARK: ----- Entities -----

type User {
  id: ObjectId!
  email: String!
  username: String!
  firstName: String
  lastName: String
  createdAt: Date!
  updatedAt: Date!
  habits: [Habit!]!
}

type Habit {
  id: ObjectId!
  userId: ObjectId!
  title: String!
  description: String
  regularity: Regularity
  createdAt: Date!
  habitLogs: [HabitLog!]!
}

type HabitLog {
  id: ObjectId!
  habitId: ObjectId!
  status: Status
  createdAt: Date!
}
